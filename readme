# ğŸ¬ TikTok Backend API (Node.js + Express + MongoDB)

A backend REST API for a TikTok-like application built with **Node.js**, **Express**, **MongoDB (Mongoose)**, and **JWT authentication**. The project supports user authentication, video posts, likes, comments, file uploads, and pagination.

---

## ğŸš€ Tech Stack

* **Node.js**
* **Express.js**
* **MongoDB + Mongoose**
* **JWT** for authentication
* **bcrypt** for password hashing
* **multer** for file uploads (avatars & videos)
* **Joi** for request validation

---

## ğŸ“ Project Structure

```
â”œâ”€â”€ app.js
â”œâ”€â”€ connect.js
â”œâ”€â”€ .env
â”œâ”€â”€ models/
â”‚   â”œâ”€â”€ User.js
â”‚   â”œâ”€â”€ Post.js
â”‚   â”œâ”€â”€ Like.js
â”‚   â””â”€â”€ Comment.js
â”œâ”€â”€ users/
â”‚   â”œâ”€â”€ users.router.js
â”‚   â”œâ”€â”€ users.service.js
â”‚   â””â”€â”€ users.validation.js
â”œâ”€â”€ posts/
â”‚   â”œâ”€â”€ posts.router.js
â”‚   â”œâ”€â”€ posts.service.js
â”‚   â””â”€â”€ posts.validation.js
â”œâ”€â”€ Middleware/
â”‚   â”œâ”€â”€ auth.js
â”‚   â””â”€â”€ validation.js
â”œâ”€â”€ utils/
â”‚   â””â”€â”€ multer.js
â”œâ”€â”€ uploads/
â”‚   â”œâ”€â”€ avatars/
â”‚   â””â”€â”€ video/
```

---

## ğŸ” Authentication

### Register

```
POST /users/register
```

* Create new user
* Hash password using bcrypt
* Optional avatar upload
* Following another users

### Login

```
POST /users/login
```

* Email + password
* Returns JWT token

### Get User by Token

```
GET /user/
```

* Requires Authorization header

---

## ğŸ‘¤ User Model

* username
* email (unique)
* password (hashed)
* avatar
* followers / following

---

## ğŸ¥ Posts

### Create Post

```
POST /posts
```

* Auth required
* Upload video (mp4, mov, etc.)
* Optional caption

### Get All Posts (Feed)

```
GET /post?page=1&limit=10
```

* Pagination (skip + limit)
* Populate user, likes, comments

### Get Posts by User

```
GET /post/own?page=1&limit=10
```

### Delete Post

```
DELETE /post/:id
```

* Only post owner can delete

---

## â¤ï¸ Likes

### Toggle Like

```
POST /like/
```

* If like exists â†’ remove
* If not â†’ add like

---

## ğŸ’¬ Comments

### Add Comment

```
POST /comment/
```

## ğŸ“¦ Models Overview

### Post

* userId (ref User)
* videoUrl
* caption
* likes [Like]
* comments [Comment]

### Like

* userId
* postId

### Comment

* userId
* postId
* text

---

## ğŸ“¤ File Uploads

* **Avatar upload** â†’ `/uploads/picture`
* **Video upload** â†’ `/uploads/video`
* File type validation
* File size limit (configurable)

---

## âœ… Validation

* Joi used for:

  * Register
  * Login
  * Create post
  * Delete post
  * Like / Comment

---

## âš™ï¸ Environment Variables

```
PORT=1200
MONGO_URL=mongodb+srv://reemebrahim:A6dg7ia4%40@cluster0.qszet85.mongodb.net/tiktok
JWT_SECRET=welcome
```

---

## ğŸ›¡ï¸ Security Features

* JWT authentication middleware
* Password hashing
* Protected routes
* File type & size validation

---

## ğŸ“ˆ Pagination

* Supports `page & limit`
* Supports `skip & limit`
* Optimized for infinite scroll

---

